(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6917c8e1"],{"0b41":function(t,e,i){},"7e47":function(t,e,i){"use strict";i("0b41")},f35b:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",{staticClass:"ma-0 h-100"},[i("v-col",{attrs:{cols:"8"}},[t.editorRender?i("monaco-editor",{ref:"code-editor",staticClass:"editor",attrs:{language:t.editor.language,theme:t.editor.theme,options:t.editor.options},on:{editorDidMount:t.editorDidMount},model:{value:t.editor.code,callback:function(e){t.$set(t.editor,"code",e)},expression:"editor.code"}}):t._e()],1),i("v-col",{staticClass:"h-100",attrs:{cols:"4"}},[i("v-row",{staticClass:"ma-0",staticStyle:{height:"85%"}},[i("v-col",{attrs:{cols:"12"}},[i("h3",[t._v(t._s(t.$t("dashboard.config.desc-title")))]),i("v-divider",{staticClass:"my-2"}),i("p",{domProps:{innerHTML:t._s(t.description)}})],1)],1),i("v-row",{staticClass:"ma-0",staticStyle:{height:"15%"},attrs:{align:"end"}},[i("v-col",{staticClass:"pa-0",attrs:{cols:"12",align:"right"}},[i("v-btn",{attrs:{disabled:t.$store.getters.loading||!t.modified,dark:t.$store.getters.loading||t.modified,loading:t.$store.getters.loading,depressed:"",tile:"",block:"",color:"teal"},on:{click:t.save}},[t._v(" "+t._s(t.$t("save"))+" ")]),i("v-btn",{staticClass:"mt-2",attrs:{depressed:"",tile:"",block:"",dark:"",color:"red"},on:{click:t.restoreConfig}},[t._v(" "+t._s(t.$t("dashboard.config.restore-config"))+" ")])],1)],1)],1)],1)},o=[],a=i("1da1"),n=i("d4ec"),s=i("bee2"),c=i("257e"),d=i("262e"),h=i("2caf"),l=i("ade3"),u=(i("96cf"),i("99af"),i("ac1f"),i("1276"),i("a15b"),i("a4d3"),i("e01a"),i("466d"),i("9ab4")),g=i("1b40"),f=i("8305"),p=i("e2c1"),m=function(t){Object(d["a"])(i,t);var e=Object(h["a"])(i);function i(){var t;Object(n["a"])(this,i);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),Object(l["a"])(Object(c["a"])(t),"editor",{options:{automaticLayout:!0},language:"yaml",code:"",theme:t.$vuetify.theme.dark?"vs-dark":"vs"}),Object(l["a"])(Object(c["a"])(t),"originalCode",""),Object(l["a"])(Object(c["a"])(t),"configFilePath","_config.yml"),Object(l["a"])(Object(c["a"])(t),"description",""),Object(l["a"])(Object(c["a"])(t),"editorRender",!1),t}return Object(s["a"])(i,[{key:"modified",get:function(){return this.originalCode!==this.editor.code}},{key:"mounted",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$logger.debug("app","DashboardConfig mounted");case 1:return t.next=4,this.$git.getContent(this.configFilePath);case 4:if(t.t0=t.sent,t.t0){t.next=7;break}t.t0="";case 7:if(this.originalCode=this.editor.code=t.t0,!this.originalCode){t.next=10;break}return t.abrupt("break",14);case 10:return t.next=12,this.$sleep(500);case 12:t.next=1;break;case 14:this.$nextTick((function(){e.editorRender=!0}));case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"change",value:function(){var t=this;switch(this.editor.language){case"yaml":try{this.editor.code=p["a"].dump(JSON.parse(this.editor.code)),this.originalCode=p["a"].dump(JSON.parse(this.originalCode))}catch(e){this.$noti({type:"error",horizontal:"right",vertical:"top",content:this.$t("dashboard.config.dump-error")}),this.$nextTick((function(){return t.editor.language="json"}))}break;case"json":try{this.editor.code=JSON.stringify(p["a"].load(this.editor.code),null,"\t"),this.originalCode=JSON.stringify(p["a"].load(this.originalCode),null,"\t")}catch(i){this.$noti({type:"error",horizontal:"right",vertical:"top",content:this.$t("dashboard.config.parse-error")}),this.$nextTick((function(){return t.editor.language="yaml"}))}break}}},{key:"save",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$store.commit("loading",!0),e=this.editor.code,"json"!==this.editor.language){t.next=12;break}t.prev=3,e=p["a"].dump(JSON.parse(e)),t.next=12;break;case 7:return t.prev=7,t.t0=t["catch"](3),this.$noti({type:"error",horizontal:"right",vertical:"top",content:this.$t("dashboard.config.dump-error")}),this.$store.commit("loading",!1),t.abrupt("return");case 12:return t.next=14,this.$git.clear();case 14:return this.$git.update(this.configFilePath,e),t.next=17,this.$git.commit("UPDATE: ".concat(this.configFilePath));case 17:this.originalCode=this.editor.code,this.$store.commit("loading",!1);case 19:case"end":return t.stop()}}),t,this,[[3,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"editorDidMount",value:function(t){var e=this;t.onDidChangeCursorPosition((function(t){var i=t.position,r=e.parsePath(e.editor.code.split("\n"),i.lineNumber-1),o=r.reverse().join(">");e.description=e.$tf("dashboard.config.desc.".concat(o),"")}))}},{key:"restoreConfig",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("loadmsg",this.$t("dashboard.config.restore-config")),this.$store.commit("loading",!0),t.next=4,this.$git.getContent("_config.yml","yaml","git-story/git-story-template");case 4:return e=t.sent,e.root="/",e.url="https://".concat(this.$store.getters.user.userName,".github.io/"),e.title=e.author=this.$store.getters.user.userName,this.editor.code=p["a"].dump(e),this.$git.clear(),this.$git.update(this.configFilePath,this.editor.code),t.next=13,this.$git.commit("RESTORE: ".concat(this.configFilePath));case 13:this.$store.commit("loading",!1);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"parsePath",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=t[e].match(/(\s*)?(\w*)?:/);if(o){var a=o[1],n=o[2];if(a!==r&&(i.push(n),r=a,!a))return i}return this.parsePath(t,e-1,i,r)}}]),i}(Object(g["b"])(f["a"]));m=Object(u["__decorate"])([Object(g["a"])({components:{}})],m);var b=m,v=b,$=(i("7e47"),i("2877")),k=i("6544"),y=i.n(k),O=i("8336"),j=i("62ad"),C=i("ce7e"),w=i("0fd9"),x=Object($["a"])(v,r,o,!1,null,null,null);e["default"]=x.exports;y()(x,{VBtn:O["a"],VCol:j["a"],VDivider:C["a"],VRow:w["a"]})}}]);
//# sourceMappingURL=chunk-6917c8e1.js.map